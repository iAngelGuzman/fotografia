@model IEnumerable<MoEmpleado>
@{
    ViewData["Title"] = "Lista de Empleados";
}

<div class="container-fluid col-12 col-md-9 col-xl-6 mx-auto">
    <h2 class="mt-4">Empleados</h2>
    <div class="d-flex flex-wrap mt-5 gap-2">
        <div class="col-4 col-md-3 order-1 order-md-0">
            <div class="input-group">
                <label class="input-group-text" for="rowsSelector">Ver:</label>
                <select id="ddlEstudiante" class="form-select">
                    <option value="5">5</option>
                    <option value="10" selected>10</option>
                    <option value="25">25</option>
                    <option value="50">50</option>
                    <option value="100">100</option>
                </select>
            </div>
        </div>
        <div class="col-12 col-md-6 mx-auto order-0 order-md-1">
            <input id="txtBuscarEstudiante" type="text" class="form-control col-10"
                placeholder="Escriba el nombre de un elemento..." aria-label="Filtrar empleados" />
        </div>
        <button id="btnAgregar" class="btn btn-primary btn-md ms-auto order-2" onclick="fnMostrarAgregarEmpleado()"
            data-bs-toggle="tooltip" title="Agregar">
            <i class="fa-solid fa-circle-plus"></i>
            <span class="ms-1">Agregar</span>
        </button>
    </div>
    <div class="table-responsive mt-3">
        <table class="table table-striped table-hover">
            <thead class="text-center">
                <tr>
                    <th>No. Personal</th>
                    <th>Usuario</th>
                    <th>Departamento</th>
                    <th>Permisos</th>
                    <th>Admin</th>
                    <th>Activo</th>
                    <th>Modificación</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody id="employeeTableBody">
                @foreach (var empleado in Model)
                {
                    <tr>
                        <td>@empleado.NNoPerson</td>
                        <td>@empleado.SUsuario</td>
                        <td>@empleado.SDep</td>
                        <td>@empleado.CPermisos</td>
                        <td>@empleado.BAdmin</td>
                        <td>@empleado.CIndActivo</td>
                        <td>@empleado.DFUltModif</td>
                        <td>
                            <a class="btn btn-secondary" asp-route="EditarEmpleado" asp-route-id="@empleado.NId">Editar</a>
                            <a class="btn btn-danger" asp-route="EliminarEmpleado" asp-route-id="@empleado.NId">Eliminar</a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>

    </div>
</div>

<div class="modal fade" id="mdlAgregarEmpleado" tabindex="-1" aria-labelledby="hAgregarEmpleado" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">

            <!-- Header -->
            <div class="modal-header">
                <h5 class="modal-title" id="hAgregarEmpleado">Agregar Empleado</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
            </div>

            <!-- Body -->
            <div class="modal-body">
                <form id="formAgregarEmpleado">
                    <!-- Buscar empleado -->
                    <div class="input-group mb-3">
                        <input type="text" id="txtBusqueda" class="form-control" placeholder="Buscar empleado por clave o no. personal..." />
                        <button class="btn btn-primary" id="btnBuscar" type="button">Buscar</button>
                    </div>

                    <!-- Select oculto de resultados -->
                    <div id="divBusqueda" class="mt-2" style="display: none;">
                        <label for="ddlResultados" class="text-muted">Selecciona un empleado:</label>
                        <select id="ddlResultados" class="form-select mt-1">
                            <option value="" selected hidden>Seleccione...</option>
                        </select>
                    </div>

                    <hr />
                    <div class="mt-3">
                        <p>Datos del empleado</p>
                        <div class="form-group d-flex align-items-center">
                            <label class="text-muted col-3" for="txtNoPersonal">No. Personal:</label>
                            <input type="text" id="txtNoPersonal" class="form-control mt-1" placeholder="No hay datos disponibles..." disabled />
                        </div>
                        <div class="form-group d-flex align-items-center mt-2">
                            <label class="text-muted col-3" for="txtUsuario">Usuario:</label>
                            <input type="text" id="txtUsuario" class="form-control mt-1" placeholder="No hay datos disponibles..." disabled />
                        </div>
                        <div class="form-group d-flex align-items-center mt-2">
                            <label class="text-muted col-3" for="txtDep">Departamento:</label>
                            <input type="text" id="txtDep" class="form-control mt-1" placeholder="No hay datos disponibles..." disabled />
                        </div>
                    </div>
                    <hr />
                    <p>Asignar permisos</p>
                    <!-- Permisos y Admin -->
                    <div class="d-flex align-items-center gap-3">
                        <select id="ddlPermisos" class="form-select w-auto" disabled required >
                            <option value="" selected hidden disabled>Fotos a cargar</option>
                            <option value="a">Estudiante y Personal</option>
                            <option value="e">Estudiante</option>
                            <option value="p">Personal</option>
                            <option value="n">Ninguno</option>
                        </select>

                        <div class="form-check">
                            <input type="checkbox" id="txtAdmin" class="form-check-input" disabled >
                            <label class="form-check-label" for="txtAdmin">Administrador</label>
                        </div>
                    </div>
                </form>
            </div>


            <!-- Footer -->
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-success" id="btnAgregarEmpleado">Agregar</button>
            </div>

        </div>
    </div>
</div>

<script src="~/js/Scripts/jsAdmin.js"></script>